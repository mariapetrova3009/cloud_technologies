# Отчёт Лаба 2 базовая

## Плохой докер файл

1. **image: nginx:latest**  
   Не использование фиксированной версии. Так как на локальной машине работает одна версия, а при сборке проекта подтянется самая свежая, то поведение контейнера может отличаться + появятся баги  
2. **ADD . /usr/share/nginx/html**
    Добавляется весь проект целиком в контейнер. В итоге в образ попадут ненужные файлы (например, .git, логи, секреты)
3. **ENV API_KEY=supersecret**
    Пароль прямо в докер файле. Это небезопасно, ведь его легко узнать
4. **Работа от root + порт 80**
    Не совсем безопасно, можно получиь доступ к хосту

## Исправления в хорошем Dockerfile и результат
1. **Испарвили nginx:latest на стало nginx:1.25-alpine**
    Версия фиксированная, а значит контейнер будет всегда испарвно работать

2. **Испарвили ADD . на COPY public/**
    В образ копируются только нужные файлы из папки public. Лишние файлы не попадают внутрь

3. **Убрали ENV с паролем**
Секреты больше не хранятся в образе. Если понадобится,то можно передать их при запуске через -e

4. **Не root + другой порт**
    Добавили USER nginx, и nginx слушает порт 8080. Так мы избегаем запуска от root и использования конкретного порта. Это повышает безопасность

## Плохие практики при работе с контейнерами
1. **Запускать контейнеры с тегом latest**
    В любой момент «latest» может измениться, и окружение будет другим, поэтому могут появится баги
2. **Хранить пароли прямо в образе**
    В Dockerfile нельзя прописывать учетные данные — они навсегда попадут в слои образа, и любой сможет их увидеть.

## Выводы
    Мы разобрали, как правильно и неправильно писать Dockerfile. На практике мы увидели, какие ошибки могут допускаться — использование latest, хранение паролей прямо в образе, копирование лишних файлов и запуск от root. После исправлений мы получили «хороший» Dockerfile, который делает образ более безопасным и правильным